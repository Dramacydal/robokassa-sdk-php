# Robokassa SDK (PHP)

SDK –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π **Robokassa** –Ω–∞ PHP.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–≤–∫–ª—é—á–∞—è JWT), –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SDK —á–µ—Ä–µ–∑ **Composer**:

```sh
composer require robokassa/sdk-php
````

## üöÄ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥                                           | –û–ø–∏—Å–∞–Ω–∏–µ                                                                      | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                                                                                |
|-------------------------------------------------|-------------------------------------------------------------------------------| ------------------------------------------------------------------------------------------- |
| `payment()->sendJwt(array $params): string`  | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±. –°–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ JWT-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å          | [docs.robokassa.ru/pay-interface/#jwt](https://docs.robokassa.ru/pay-interface/#jwt)        |
| `payment()->sendCurl(array $params): string` | –°–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å                          | ‚Äî                                                                                           |
| `webService()->getPaymentMethods(string $lang = 'ru'): array` | –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã                                      | [docs.robokassa.ru/xml-interfaces/#currency](https://docs.robokassa.ru/xml-interfaces/#currency) |
| `webService()->opState(int $invoiceID): array`                | –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –ø–æ `InvoiceID`                                         | [docs.robokassa.ru/xml-interfaces/#account](https://docs.robokassa.ru/xml-interfaces/#account) |
| `status()->getInvoiceInformationList(array $filters): array` | –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—á–µ—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ, —Å—É–º–º–µ –∏ —Ç.–¥.| [docs.robokassa.ru/invoiceapi/#status](https://docs.robokassa.ru/invoiceapi/#status) |
| `receipt()->sendSecondCheck(array $payload): string`        | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —á–µ–∫–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç             | [docs.robokassa.ru/second-check/#request](https://docs.robokassa.ru/second-check/#request) |
| `receipt()->getCheckStatus(array $payload): array`         | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∏—Å–∫–∞–ª—å–Ω–æ–≥–æ —á–µ–∫–∞                       | [docs.robokassa.ru/second-check/#status](https://docs.robokassa.ru/second-check/#status) |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

SDK –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π: –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª–∏ —Ç–∞–∫, –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–Ω—è—Ç–æ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ (Laravel, Symfony, Docker, —á–∏—Å—Ç—ã–π PHP –∏ —Ç.–¥.). –í SDK –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –º–∞—Å—Å–∏–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏.

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env`.
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `ROBOKASSA_LOGIN`, `ROBOKASSA_PASSWORD1`, `ROBOKASSA_PASSWORD2`.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª –∏–∑ –ø–∞–ø–∫–∏ `examples/`. –§–∞–π–ª [`examples/bootstrap.php`](./examples/bootstrap.php) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç `.env` –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ `$_ENV`.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

* **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Laravel, Symfony –∏ –¥—Ä.)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à—Ç–∞—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Robokassa`.
* **–ß–∏—Å—Ç—ã–π PHP –∏–ª–∏ Docker** ‚Äî –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `export` –∏–ª–∏ `docker run -e`) –ª–∏–±–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `$_ENV` –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.

```php
$robokassa = new Robokassa(
[
'login'     => getenv('ROBOKASSA_LOGIN') ?: '',
'password1' => getenv('ROBOKASSA_PASSWORD1') ?: '',
'password2' => getenv('ROBOKASSA_PASSWORD2') ?: '',
'hashType'  => 'md5',
],
new HttpClient()
);
```

## üìÇ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SDK –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ [`examples/`](./examples):

* [`send_payment_jwt.php`](./examples/send_payment_jwt.php) ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ **JWT** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
* [`send_payment_curl.php`](./examples/send_payment_curl.php) ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π CURL-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
* [`get_payment_methods.php`](./examples/get_payment_methods.php) ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã
* [`get_invoice_status.php`](./examples/get_invoice_status.php) ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å—á—ë—Ç–∞
* [`send_second_check.php`](./examples/send_second_check.php) ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ —á–µ–∫–∞
* [`get_check_status.php`](./examples/get_check_status.php) ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —á–µ–∫–∞
* [`get_invoice_information.php`](./examples/get_invoice_information.php) ‚Äî –∑–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å—á–µ—Ç–∞/—Å—Å—ã–ª–∫–∏

## üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

* –ú–µ—Ç–æ–¥ `payment()->sendJwt()` ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
* –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs.robokassa.ru](https://docs.robokassa.ru/)

